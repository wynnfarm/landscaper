{% extends "base.html" %} {% block title %}Crew Management - Staff Dashboard{% endblock %} {% block content %}
<div class="main-content">
  <h2 class="page-title">👥 Crew Management</h2>

  <!-- Today's Schedule -->
  <section class="mb-3">
    <div class="card">
      <h3 class="card-title">Today's Schedule - {{ crew.schedule.today }}</h3>
      <div class="schedule-info">
        <p><strong>Weather:</strong> {{ crew.schedule.weather }}</p>
        <div class="task-list">
          <h4>Today's Tasks:</h4>
          <ul>
            {% for task in crew.schedule.tasks %}
            <li>{{ task }}</li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Active Crew -->
  <section class="mb-3">
    <h3 class="card-title">Active Crew Members</h3>
    <div class="crew-list">
      {% for member in crew.active_crew %}
      <div class="card crew-card">
        <div class="crew-header">
          <div class="crew-info">
            <h4 style="color: #2c5530; margin-bottom: 4px">{{ member.full_name }}</h4>
            <p class="text-muted">{{ member.role }}</p>
          </div>
          <div class="crew-status">
            <span class="status-badge status-{{ 'on-site' if member.is_active else 'offline' }}"
              >{{ 'On Site' if member.is_active else 'Offline' }}</span
            >
          </div>
        </div>
        <div class="crew-details">
          <p><strong>Phone:</strong> <a href="tel:{{ member.phone }}">{{ member.phone }}</a></p>
          <p><strong>Email:</strong> {{ member.email }}</p>
          <p><strong>Hourly Rate:</strong> {{ member.formatted_hourly_rate }}</p>
          <p><strong>Hire Date:</strong> {{ member.hire_date }}</p>
        </div>
        <div class="crew-actions">
          <button
            class="btn btn-primary btn-sm"
            onclick="callCrewMember('{{ member.phone }}', '{{ member.full_name }}')"
          >
            📞 Call
          </button>
          <button
            class="btn btn-outline btn-sm"
            onclick="updateCrewMember('{{ member.id }}', '{{ member.full_name }}')"
          >
            📝 Update
          </button>
          <button class="btn btn-outline btn-sm" onclick="assignToProject('{{ member.id }}', '{{ member.full_name }}')">
            📍 Assign
          </button>
          <button class="btn btn-outline btn-sm" onclick="viewSchedule('{{ member.id }}', '{{ member.full_name }}')">
            📅 Schedule
          </button>
        </div>
      </div>
      {% endfor %}
    </div>
  </section>

  <!-- Quick Actions -->
  <section class="quick-actions">
    <h3 class="card-title">Quick Actions</h3>
    <div class="grid grid-2">
      <button class="btn btn-primary">📅 View Schedule</button>
      <button class="btn btn-outline">👤 Add Member</button>
      <button class="btn btn-outline">📊 Time Tracking</button>
      <button class="btn btn-secondary">📋 Reports</button>
    </div>
  </section>
</div>

<style>
  .crew-card {
    margin-bottom: 16px;
    border-left: 4px solid #2c5530;
  }

  .crew-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 16px;
  }

  .crew-info h4 {
    margin: 0;
  }

  .crew-details {
    margin: 16px 0;
  }

  .crew-details p {
    margin: 8px 0;
    font-size: 14px;
  }

  .crew-actions {
    display: flex;
    gap: 8px;
    margin-top: 16px;
  }

  .crew-actions .btn {
    flex: 1;
  }

  .status-badge {
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
  }

  .status-on-site {
    background: #d4edda;
    color: #155724;
  }

  .status-planning {
    background: #d1ecf1;
    color: #0c5460;
  }

  .schedule-info {
    margin: 16px 0;
  }

  .task-list {
    margin-top: 16px;
  }

  .task-list ul {
    margin: 8px 0;
    padding-left: 20px;
  }

  .task-list li {
    margin: 4px 0;
    font-size: 14px;
  }
</style>
{% endblock %}
